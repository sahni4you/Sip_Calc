<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ver4 - SIP & Lumpsum Calculator - for Mobile</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">

    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; 
                background-color: rgb(210 210 185); }
        .container { max-width: 400px; margin: -25px auto; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        input, button { margin: 10px 0; padding: 10px; }
        button { width: 70%;background-color: blue; color: white; border: none; cursor: pointer; 
                    font-size: 17px; letter-spacing: 0.5px; border-radius: 4px; }

        select#investmentType { font-size: 18px; width: 118px; }

       
        label { font-size: 17px; }
        input { width: 120px; font-size: 20px; padding: 6px 10px; }
        input#years, #rate { width: 50px; }

        h3#title { margin-top: -8px; }
        h3#future_value { font-size: 16px; margin-top: 5px; margin-bottom: 13px; }

        div#result { font-size: 31px; font-weight: bold; letter-spacing: 0.4px; 
                    background-color: honeydew; padding: 12px;
                    width: 200px; margin: auto; border-radius: 5px;
                    font-family: 'Roboto', sans-serif; /* this font loaded from web using the link tag given after title tag. Got the idea of Using a web font from Gemini Chat. It said that Android pe sab Windows Fonts
                    are not available, So, use a web Font Instead. I tried Arial Rounded MT First, but it didn't work
                    on Mobile & then I used Roboto bold, which looked good.   */
                    /*  box-shadow: 0 0 4px 0 rgba(240, 255, 240, 0.5);   box-shadow is optional  */ 
                    }
        div#container_1 { margin-top: 10px; }

        div#ver_info { margin: 250px auto;
                        margin-bottom: 0;
                        max-width: 700px;
                        color: rgb(50,50,50);
                        line-height: 25px;
                    }        
    </style>
</head>
<body>

    <div class="container">
        <h3 id="title">SIP & Lumpsum Calculator</h2>

        <label>Investment Type:</label>&nbsp;
        <select id="investmentType">
            <option value="lumpsum">Lumpsum</option>
            <option value="sip">SIP</option>
        </select>

        <div id="container_1">
        
            <label>Amount (₹):</label>
            <input type="text" id="amount" placeholder="Enter amount" value="1000000" step="1000" required><br>

            <label>Duration (Years):</label>
            <input type="number" id="years" placeholder="Enter years"  value="15" required><br>

            <label>Annual Rate (%):</label>
            <input type="number" id="rate" placeholder="(e.g. 12)"  value="22" step="0.5" required><br>

            <button onclick="calculate()">Calculate</button>

            <h3 id="future_value">Future Value : &nbsp;Rs.</h3>
            <div id="result">0</div>
        </div>
    </div>

    <div id="ver_info">
This is Mobile ver4, based on 'ver3 for Mobile'.<br>
Added buttons to Increase/Decrease Years & Rate of Interest, thru + & - buttons <br>
For this html mein buttons Added, Css for buttons & Js for buttons working as well. <br>
For buttons Js Code Chatgpt, Gemini, Copilot/Bing_Chat & Perplexity -- searched with same Prompts <br>
The Code was easy, So I have not Saved any html file on hdd for this.
<br><br>

This is Mobile ver3, based on 'ver2 for Mobile'.<br>
Made some input element in html &  Css  Changes. <br>
No Js Change from prevoius ver2.
<br>
Dated : 31Jan25

<br><br>
Just Info : I have Used Roboto as web Font for div#result  <br>
For this 'link' tags have been used after title tag in the head Section. <br>
Got this Idea from of Using a web font from Gemini Chat. It said that Android 
pe sab Windows Fonts are not available, So, use a web Font Instead. 
I tried Arial Rounded MT First, but it didn't work on Mobile 
& then I used Roboto bold, which looked good.
<br><br>
<span>
in ver4 a div to add after result which will show 
the difference on each calculate btn press
in +ve or -ve. So,html & Js both will change in ver4 
<br><br>
Slider to Add for Rate of Interest.
</span>
    </div>    

    <script>
const amountInput = document.getElementById('amount');

// ✅ Format number in Indian Numbering System (e.g., 10,00,000)
function formatNumberWithCommas(value) {
    const num = value.replace(/\D/g, ''); // Remove non-digit characters
    if (num.length <= 3) return num; // No commas needed for 3 or fewer digits
    
    const lastThree = num.slice(-3);
    const otherNumbers = num.slice(0, -3);
    return otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + ',' + lastThree;
}

// Apply formatting while typing
amountInput.addEventListener('input', (e) => {
    const input = e.target;
    const unformattedValue = input.value.replace(/,/g, '');

    if (unformattedValue === '') {
        input.value = '';
        return;
    }

    const formattedValue = formatNumberWithCommas(unformattedValue);

    // Store previous cursor position
    const previousLength = input.value.length;
    const selectionStart = input.selectionStart;

    // Update input value with formatted number
    input.value = formattedValue;

    // Adjust the cursor position correctly
    const newLength = formattedValue.length;
    const cursorPosition = selectionStart + (newLength - previousLength);
    input.setSelectionRange(cursorPosition, cursorPosition);

    // Recalculate after formatting, the below Line Decides whether Calculation be done done Automatically, 
    // as you Input in input#amount. As it is Open below, Calculation will be done Automatically as you change/input
    // Values in input#amount. If you want that the Calculation should happen only After you press the Calculate btn
    // then just Close the below line using 2 Forward Slashes. Even after Closing the below Line the Rest of Code works ok.
    calculate();
});

// Modified calculate function to handle formatted input
function calculate() {
    const rawValue = document.getElementById("amount").value.replace(/,/g, '');
    const P = parseFloat(rawValue) || 0;
    const r = parseFloat(document.getElementById("rate").value) / 100 / 12;
    const n = parseInt(document.getElementById("years").value) * 12;

    let FV = 0;
    const type = document.getElementById("investmentType").value;

    if (P > 0) {
        if (type === "sip") {
            FV = P * ((Math.pow(1 + r, n) - 1) / r) * (1 + r);
        } else {
            FV = P * Math.pow((1 + (r * 12)), (n / 12));
        }
    }

    document.getElementById("result").innerText = Math.round(FV).toLocaleString('en-IN');
}

// Format and calculate on page load
window.onload = function () {
    const initialValue = amountInput.value.replace(/,/g, '');
    if (initialValue) {
        amountInput.value = formatNumberWithCommas(initialValue);
    } else {
        amountInput.value = formatNumberWithCommas('1000000'); // Default value
    }
    calculate();
};


    </script>

</body>
</html>
